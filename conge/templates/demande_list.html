{% extends 'base.html'%}
{% load static %}
{% load widget_tweaks %}

{% block "main_content" %}
<div id="app">
  <div class="row">
    <div class="col-12">
      <div class="card card-outline card-primary">
        <div class="card-header">
          <h3 class="card-title">Aide</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
          </div>
        </div>
        <div class="card-body">
          <table class="table table-condensed table-striped">
            <thead>
              <tr>
                <th></th>
                <th>Nom</th>
                <th>DÃ©but - Fin</th>
                <th>Motif</th>
                <th>Etat</th>
                <th>Date de la demande</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for demande in object_list %}
              <tr>
                <td>
                  {% if demande.commentaire_salarie %}
                    <i class="far fa-comment"  data-toggle="tooltip" data-placement="top" title="{{demande.commentaire_salarie}}"></i>
                  {% endif %}
                </td>
                <td>{{ demande.salarie }}</td>
                <td>{{ demande.debut }} <br /> {{ demande.fin }}</td>
                <td>{{ demande.motif }}</td>
                <td>{{ demande.etat_str | safe }}</td>
                <td>{{ demande.created }}</td>
                <td>
                  <div class="row">
                    <div class="col-4">
                      <a href="/conge/new/step2?id={{demande.id}}" class="btn btn-primary"><i class="fas fa-edit"></i></a>
                    </div>
                    {% if demande.validation_progressis and perms.conge.can_validate_conges %}
                      {% if demande.validation_progressis.slug_acceptation %}
                      <div class="col-4">
                        <a href="/conge/accept/{{demande.validation_progressis.slug_acceptation}}/" class="btn btn-success"><i class="fas fa-thumbs-up"></i></a>
                      </div>
                      {% endif %}
                      {% if demande.validation_progressis.slug_refus %}
                      <div class="col-4">
                        <a href="/conge/reject/{{demande.validation_progressis.slug_refus}}/" class="btn btn-danger"><i class="fas fa-thumbs-down"></i></a>
                      </div>
                      {% endif %}
                    {% endif %}
                  </div>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock "main_content"%}
{% block "footer_js" %}
<script src="{% static 'vuejs/vue.js' %}"></script>
<script>

$(function () {
  $('#debut_input').datetimepicker({
      format: 'DD/MM/YYYY',
      locale: 'fr',
  });
  $('#fin_input').datetimepicker({
      format: 'DD/MM/YYYY',
      locale: 'fr',
  });
});



var app = new Vue({
  el: '#app',
  delimiters: ['${','}'],
  data() {
    return({

    });
  },

  methods: {
    
  },
  mounted: function () {

  }
});

</script>
{% endblock "footer_js"%}