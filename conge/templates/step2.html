{% extends 'base.html'%}
{% load static %}
{% load widget_tweaks %}

{% block "main_content" %}
<div id="app">
  <div class="row">
    <div class="col-8">
      <div class="card card-outline card-primary">
        <div class="card-header">
          <h3 class="card-title">Nouvelle demande de congés</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
          </div>
        </div>  
        <div class="card-body">
          <form method="POST" action="/conge/new/step2/?id={{id}}">
            {% csrf_token %}
            <input type="hidden" name="id" value="{{ id }}">
            <div class="row">
              <div class="col-5">
                {{ form.non_field_errors }}
                <div class="form-group">
                    {{ form.email.errors }}
                    <label for="{{ form.email.id_for_label }}">Email :</label>
                    {{ form.email |add_class:"form-control"}}
                </div>
              </div>
              <div class="col-5">
                {{ form.non_field_errors }}
                <div class="form-group">
                    {{ form.nom_prenom.errors }}
                    <label for="{{ form.nom_prenom.id_for_label }}">Nom et prénom :</label>
                    {{ form.nom_prenom |add_class:"form-control"}}
                </div>
              </div>
              <div class="col-2">
                <label for="{{ form.email.id_for_label }}">&nbsp;</label>
                <button type="submit" class="btn btn-primary btn-block">Ajouter une personne</button>
              </div>
            </div>
            {% if not conge_envoye %}
            <div class="row">
              <div class="col-5"></div>
              <div class="col-2">
              </div>
              <div class="col-5"></div>
            </div>
            {% endif %}
          </form>
        </div>
      </div>
    </div>
      <div class="col-4">
      <div class="card card-outline card-primary">
        <div class="card-header">
          <h3 class="card-title">Aide</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
          </div>
        </div>
        <div class="card-body">
         <p>Entrez l'adresse email des personnes (5 maxi) qui devront donner leur aval pour le congé.</p>
         <p>Ensuite, cliquez sur Valider : Un email sera envoyé a chaque destinataire, leur permettant de valider ou non cette demande.</p>
         <p>Personnes déjà ajoutées :</p>
           <ul class="list-group">
            {% for validation in validation_list %}
            <li class="list-group-item d-flex justify-content-between align-items-center">{{validation}} ({{validation.email}}) <span><a href="/conge/remove_validation/{{ validation.id }}/" class="btn btn-danger btn-xs"><i class="fas fa-times"></i></a></span></li>
            {% endfor %}
           </ul>
          <a href="/conge/envoi/{{id}}/" class="btn btn-block btn-success">Envoyer la demande</a>

        </div>
      </div>
      </div>
    </div>
  </div>
</div>

{% endblock "main_content"%}
{% block "footer_js" %}
<script src="{% static 'vuejs/vue.js' %}"></script>
<script>

$(function () {
    $('datetimepicker-input').datetimepicker({
      locale: 'fr',
      format: 'JJ/MM/YYYY',
    });    
});


var app = new Vue({
  el: '#app',
  delimiters: ['${','}'],
  data() {
    return({

    });
  },

  methods: {
    
  },
  mounted: function () {

  }
});

</script>
{% endblock "footer_js"%}