{% extends 'base.html'%}
{% load static %}
{% load widget_tweaks %}

{% block "main_content" %}
<div id="app">
  <div class="row">
    <div class="col-8">
      <div class="card card-outline card-primary">
        <div class="card-header">
          <h3 class="card-title">Nouvelle demande de congés</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
          </div>
        </div>  
        <div class="card-body">
          <form method="POST" action="/conge/new/step2/?id={{id}}">
            {% csrf_token %}
            <input type="hidden" name="id" value="{{ id }}">
            <div class="row">
              <div class="col-6">
                {{ form.non_field_errors }}
                <div class="form-group">
                    {{ form.email.errors }}
                    <label for="{{ form.email.id_for_label }}">Email :</label>
                    {{ form.email |add_class:"form-control"}}
                </div>
              </div>
              <div class="col-6">
                {{ form.non_field_errors }}
                <div class="form-group">
                    {{ form.nom_prenom.errors }}
                    <label for="{{ form.nom_prenom.id_for_label }}">Nom et prénom :</label>
                    {{ form.nom_prenom |add_class:"form-control"}}
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-4"></div>
              <div class="col-2">
                <button type="submit" class="btn btn-primary btn-block">Ajouter une validation</button>
              </div>
              <div class="col-2">
                <a href="/conge/envoi/{{id}}/" class="btn btn-block btn-success">Valider</a>
              </div>
              <div class="col-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
      <div class="col-4">
      <div class="card card-outline card-primary">
        <div class="card-header">
          <h3 class="card-title">Aide</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
          </div>
        </div>
        <div class="card-body">
         Entrez l'adresse email des personnes (5 maxi) qui devront donner leur aval pour le congé.
         Personnes déjà ajoutées :
           <ul>
            {% for validation in validation_list %}
            <li>{{validation}} ({{validation.email}}) <a href="/conge/remove_validation/{{ validation.id }}/">[X]</a></li>
            {% endfor %}
           </ul>
        </div>
      </div>
      </div>
    </div>
  </div>
</div>

{% endblock "main_content"%}
{% block "footer_js" %}
<script src="{% static 'vuejs/vue.js' %}"></script>
<script>

$(function () {
    $('datetimepicker-input').datetimepicker({
      locale: 'fr',
      format: 'JJ/MM/YYYY',
    });    
});


var app = new Vue({
  el: '#app',
  delimiters: ['${','}'],
  data() {
    return({

    });
  },

  methods: {
    
  },
  mounted: function () {

  }
});

</script>
{% endblock "footer_js"%}